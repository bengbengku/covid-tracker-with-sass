"use strict";var map,infoWindow;let coronaGlobalData;window.onload=(()=>{initMap(),getCountriesData(),getHistoricalData(),getWorldCoronaData()});let mapCircles=[];const worldWideSelection={name:"Seluruh Dunia",value:"www",selected:!0};var casesTypeColors={cases:"#cc1034",active:"#9d80fe",recovered:"#7dd71d",deaths:"#fb4443"};const mapCenter={lat:-5,lng:120};function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:mapCenter,zoom:3.2,minZoom:3,styles:mapStyle,scrollwheel:!1}),infoWindow=new google.maps.InfoWindow}const changeDataSelection=(e,a)=>{clearTheMap(),showDataOnMap(coronaGlobalData,a),setActiveTab(e)},setActiveTab=e=>{document.querySelector(".card.active").classList.remove("active"),e.classList.add("active")},clearTheMap=()=>{for(let e of mapCircles)e.setMap(null)},setMapCenter=(e,a,t)=>{map.panTo({lat:e,lng:a}),map.setZoom(t)},initDropdown=e=>{$(".ui.dropdown").dropdown({values:e,onChange:function(e,a){e!==worldWideSelection.value?getCountryData(e):getWorldCoronaData()}})},setSearchList=e=>{let a=[];a.push(worldWideSelection),e.forEach(e=>{a.push({name:e.country,value:e.countryInfo.iso3}),initDropdown(a)})},getCountriesData=()=>{fetch("https://corona.lmao.ninja/v2/countries").then(e=>e.json()).then(e=>{coronaGlobalData=e,setSearchList(e),showDataOnMap(e),showDataInTable(e)})},getCountryData=e=>{fetch("https:/disease.sh/v3/covid-19/countries/"+e).then(e=>e.json()).then(e=>{setMapCenter(e.countryInfo.lat,e.countryInfo.long,2),setStatsData(e)})},getWorldCoronaData=()=>{fetch("https://disease.sh/v3/covid-19/all").then(e=>e.json()).then(e=>{setStatsData(e),setMapCenter(mapCenter.lat,mapCenter.lng,3)})},setStatsData=e=>{let a=numeral(e.todayCases).format("+0,0"),t=numeral(e.todayRecovered).format("+0,0"),o=numeral(e.todayDeaths).format("+0,0"),n=numeral(e.cases).format("0.0a"),r=numeral(e.recovered).format("0.0a"),s=numeral(e.deaths).format("0.0a");document.querySelector(".total-number").innerHTML=a,document.querySelector(".recovered-number").innerHTML=t,document.querySelector(".deaths-number").innerHTML=o,document.querySelector(".cases-total").innerHTML=`${n} Total`,document.querySelector(".recovered-total").innerHTML=`${r} Total`,document.querySelector(".deaths-total").innerHTML=`${s} Total`},getHistoricalData=()=>{fetch("https://disease.sh/v3/covid-19/historical/all?lastdays=120").then(e=>e.json()).then(e=>{let a=buildChartData(e);buildChart(a)})},showDataOnMap=(e,a="cases")=>{e.map(e=>{let t={lat:e.countryInfo.lat,lng:e.countryInfo.long};var o=new google.maps.Circle({strokeColor:casesTypeColors[a],strokeOpacity:.5,strokeWeight:2,fillColor:casesTypeColors[a],fillOpacity:.35,map:map,center:t,radius:.28*e[a]});mapCircles.push(o);var n=`\n            <div class="info-container">\n                <div class="info-flag" style="background-image: url(${e.countryInfo.flag})"></div>\n                <div class="info-name">\n                    ${e.country}\n                </div>\n                <div class="info-confirmed">\n                    Total Kasus: ${numeral(e.cases).format("0,0")}\n                </div>\n                <div class="info-deaths">\n                   Meninggal: ${numeral(e.deaths).format("0,0")} \n                </div>\n                <div class="info-recovered">\n                   Sembuh: ${numeral(e.recovered).format("0,0")}        \n                </div>                \n            </div>\n          `,r=new google.maps.InfoWindow({content:n,position:o.center});google.maps.event.addListener(o,"mouseover",function(){r.open(map)}),google.maps.event.addListener(o,"mouseout",function(){r.close()})})},showDataInTable=e=>{var a="";e.forEach(e=>{a+=`\n            <tr>\n                <td id="img-flexbox"><div class="country-img" style="background-image: url(${e.countryInfo.flag})"></div>${e.country}</td>\n                <td>${numeral(e.cases).format("0,0")}</td>\n            </tr>\n        `,document.getElementById("table-data").innerHTML=a})};